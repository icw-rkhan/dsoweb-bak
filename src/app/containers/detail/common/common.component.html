<section>
    <div class="header">
        <h3 class="mat-h3">{{filterCategories(post?.categories)}}</h3>
        <span class="mat-body-1">{{post.date | date: 'mediumDate'}}</span>
    </div>
    <div class="inner-thumbnail" fxLayout="column">
        <img class="inner-thumbnail" src="{{post.thumbnail}}">
    </div>
    <div class="inner-content" fxLayout="row">
        <span class="title">{{post.title}}</span>
        <div class="actions" fxLayout="row" fxLayoutAlign="end start">
            <a class="bookmark-btn" (click)="onAddBookmark()" *ngIf="!post.bookmarked">
                <mat-icon aria-label="Bookmark">bookmark_border</mat-icon>
            </a>
            <a class="bookmark-btn" (click)="onRemoveBookmark()" *ngIf="post.bookmarked">
                <mat-icon aria-label="Bookmark">bookmark</mat-icon>
            </a>
            <a class="menu-btn" [matMenuTriggerFor]="menu" aria-label="Toggle menu">
                <mat-icon aria-label="Options">more_vert</mat-icon>
            </a>
            <mat-menu #menu="matMenu" xPosition="before">
                <div class="share-content">
                    <a url="{{post.link}}" shareButton="facebook">
                        <img class="share-btn" src="assets/images/icon-facebook.png">
                    </a>
                    <a url="{{post.link}}" shareButton="twitter">
                        <img class="share-btn" src="assets/images/icon-twitter.png">
                    </a>
                    <a url="{{post.link}}" shareButton="linkedin">
                        <img class="share-btn" src="assets/images/icon-linkediin.png">
                    </a>
                </div>
            </mat-menu>
        </div>
    </div>
    <div id="tLoad" [innerHtml]="post.content" hidden>
        {{fetchAuthorInfo()}}
    </div>
    <div class="author" [class.author-container]="isAuthorVisible" fxLayout="row" fxLayoutAlign="start center">
        <div id="author-avatar">
            <img src="assets/images/logo-color.png">
        </div>
        <div class="author-area" fxLayout="column" fxLayoutAlign="start start">
            <p id="author-name">
                {{authorName}}
            </p>
            <p id="author-info">
                {{authorInfo}}
            </p>
        </div>
    </div>
    <div id="contents" class="inner-content" [innerHtml]="post.content">
        {{changeLayoutOfPost()}}
        {{removeAuthorInfo()}}
    </div>
    <div class="review" fxLayout="column" fxLayoutAlign="center center" (click)="onAddReview(post.id, post.title, post.date)">
        <div class="review-question">
            <span>Finished the content?</span>
        </div>
        <div class="review-add">
            <span>Add your review</span>
        </div>
        <div>
            <img *ngFor="let rate of rateList" src="assets/images/review/star-inactive.png" class="rate-star">
        </div>
    </div>
    <div fxLayout="row" class="inner-content rate">
        <div fxFlex="50" fxLayout="column" fxLayoutAlign="center start">
            <div class="review-count">
                <span *ngIf="comments && comments.length; else zeReviews">{{comments.length}} Reviews</span>
                <ng-template #zeReviews>
                    <span>0 Reviews</span>
                </ng-template>
            </div>
            <div fxLayout="row" class="ratebar">
                <div *ngFor="let rate of rateList; index as i">
                    <img *ngIf="getRating(comments, 1)>i;else inactive" src="assets/images/review/view-star-active.png" class="rate-star">
                    <ng-template #inactive>
                    <img src="assets/images/review/view-star-inactive.png" class="rate-star">
                    </ng-template>
                </div>
                <span class="review-count">{{getRating(comments, 0)}}</span>
            </div>
        </div>
        <div fxFlex="50" fxLayoutAlign="end center">
            <button mat-button class="viewBtn" (click)="onViewAll(post.id)">View all</button>
        </div>
    </div>
    <div fxLayout ="column">
        <dso-review-card [comment]="comment" *ngFor="let comment of comments | slice:0:3"></dso-review-card>
    </div>
    <div class="inner-content" fxLayout="row">
        <div class="actions" fxFlex="100" fxLayoutAlign="end start">
            <a class="bookmark-btn" (click)="onAddBookmark()" *ngIf="!post.bookmarked">
                <mat-icon aria-label="Bookmark">bookmark_border</mat-icon>
            </a>
            <a class="bookmark-btn" (click)="onRemoveBookmark()" *ngIf="post.bookmarked">
                <mat-icon aria-label="Bookmark">bookmark</mat-icon>
            </a>
            <a class="menu-btn" [matMenuTriggerFor]="menu" aria-label="Toggle menu">
                <mat-icon aria-label="Options">more_vert</mat-icon>
            </a>
            <mat-menu #menu="matMenu" xPosition="before">
                <div class="share-content">
                    <a url="{{post.link}}" shareButton="facebook">
                        <img class="share-btn" src="assets/images/icon-facebook.png">
                    </a>
                    <a url="{{post.link}}" shareButton="twitter">
                        <img class="share-btn" src="assets/images/icon-twitter.png">
                    </a>
                    <a url="{{post.link}}" shareButton="linkedin">
                        <img class="share-btn" src="assets/images/icon-linkediin.png">
                    </a>
                </div>
            </mat-menu>
        </div>
    </div>
</section>        