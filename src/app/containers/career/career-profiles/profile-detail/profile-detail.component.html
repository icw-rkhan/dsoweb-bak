
<section>
  <div class="company-avatar">
    <img src="assets/images/career/head3.png">
  </div>
  <div class="company-info" fxLayout="row" fxLayoutAlign="start center">
    <img *ngIf="company" class="company-logo" [src]="company.logo">
    <div fxLayout="column" fxLayoutAlign="center start">
      <p *ngIf="company" class="company-name">{{company.name}}</p>
      <p fxLayout="row" fxLayoutAlign="space-between center" class="company-location" (click)="onGoToMap()">
        <label *ngIf="company">{{company.address1?company.address1:''}} {{company.address2?company.address2:''}}<br>
            {{company.city}}, {{company.state}} {{company.zip_code}}</label>
        <img src="assets/images/career/location2.png">
      </p>
    </div>
  </div>
  <article class="tab">
    <div class="tab-header">
      <button mat-button (click)="onTab('tab1')" [class.active]="tab=='tab1'">DESCRIPTION</button>
      <button mat-button (click)="onTab('tab2')" [class.active]="tab=='tab2'">JOBS</button>
      <button mat-button (click)="onTab('tab3')" [class.active]="tab=='tab3'">REVIEWS</button>
    </div>
    <div [class.show]="tab=='tab1'" [class.hide]="tab!=='tab1'" class="tab-content">
      <pre *ngIf="company" class="company-desc" [innerHtml]="company.description | safe: 'html'"></pre>
    </div>
    <div [class.show]="tab=='tab2'" [class.hide]="tab!=='tab2'" class="tab-content">
      <div class="jobs-count">{{jobs? jobs.length : 0}} Jobs</div>
      <mat-divider></mat-divider>
      <div id="contents" *ngIf="jobs && jobs.length !== 0">
        <div *ngFor="let job of jobs">
            <dso-job-card [job]="job"></dso-job-card>
        </div>
      </div>
    </div>
    <div [class.show]="tab=='tab3'" [class.hide]="tab!=='tab3'" class="tab-content">
      <div class="review-container">
        <div class="review-status">
          <div fxLayout="row" fxLayoutAlign="start center">
            <div class="review-rating">{{company? ratingFormat(company.rating) : 0}}</div>
            <div class="ratebar" fxLayout="row" fxLayoutAlign="start center">
              <div *ngFor="let rate of rateList; index as i">
                <img *ngIf="rating>i;else inactive" src="assets/images/career/review-active.png" class="rate-star">
                <ng-template #inactive>
                <img src="assets/images/career/review-inactive.png" class="rate-star">
                </ng-template>
              </div>
            </div>
            <div class="review-count">{{allReviews?allReviews.length:0}} reviews</div>
          </div>
          <div class="review-avatar" fxLayout="row" fxLayoutAlign="space-between start">
            <p fxLayout="column" fxLayoutAlign="center center">
              <circle-progress [radius]="34" [percent]="getPercentRecommend()" [showSubtitle]="false" [unitsFontSize]="20"></circle-progress>
              <label>Recommend<br>to a friend</label>
            </p>
            <p fxLayout="column" fxLayoutAlign="center center">
              <circle-progress class="approveProgress" [radius]="34" [percent]="getPercentApprove()" [showSubtitle]="false" [unitsFontSize]="20"></circle-progress>
              <label>Approve<br>of CEO</label>
            </p>
            <p fxLayout="column" fxLayoutAlign="center center">
              <img *ngIf="company && company.ceoUrl" src="company.ceoUrl">
              <img *ngIf="company && !company.ceoUrl" src="assets/images/profile/icon_user_profile.png">
              <label *ngIf="company && company.ceo">{{company.ceo}}<br>CEO</label>
              <label *ngIf="!company || !company.ceo">CEO</label>
            </p>
          </div>
        </div>
        <mat-divider></mat-divider>
        <div>
          <dso-review-extend-card [review]="review" *ngFor="let review of reviews"></dso-review-extend-card>
        </div>
        <div class="detail-footer" fxLayout="column" fxLayoutAlign="center center">
          <button *ngIf="allReviews && allReviews.length>0" mat-button (click)="loadMore()">{{loadMoreBtn}}</button>
          <button mat-raised-button (click)="onGoToAddReview(company.id)">Write review</button>
        </div>
      </div>
    </div>
  </article>
</section>